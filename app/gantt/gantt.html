
<div id="gantt" class="exposition_block">

    <div class="gantt_block">
        <div class="top-bar">
            <ng-include src="'gantt/status-bar/status-bar.html'"></ng-include>
            <ng-include src="'gantt/status-bar/tabs.html'"></ng-include>
            <div style="clear:both"></div>
        </div>

        <!--GANTT-->
        <div ng-controller="GanttController as ganttCtrl">
            <div ng-if="!ganttCtrl.isEmpty" class="gantt" dialog-background>

                <table class="gantt-backbone-table" style="width: 100%;">
                    <tr>
                        <td class="context-actions-bar">
                            <div ng-include="'gantt/context-actions-bar/context-actions-bar.html'"></div>
                        </td>
                        <td rowspan="2"
                            class="gantt-right-block"
                            style="overflow: {{ganttCtrl.isZoomed() ? 'auto':'hidden'}}">

                            <div style="width: {{ganttCtrl.zoom.getValue()}}%">
                                <timeline></timeline>
                            </div>

                            <div class="tasks_wrapper" style="width: {{ganttCtrl.zoom.getValue()}}%">
                                <div ng-repeat="task in ganttCtrl.tasks">
                                    <ng-include src="'gantt/tasks/task.html'"></ng-include>
                                    <div style="clear: both"></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="gantt-left-block"
                            style="
                                width:{{ganttCtrl.infoBlockWidth.getValue()}}%;
                                vertical-align: bottom;
                                overflow-x: {{ganttCtrl.isZoomed() ? 'scroll' : 'hidden'}}">
                            <div class="task-info-block">
                                <ng-include src="'gantt/tasks/tasks-info.html'"></ng-include>
                            </div>
                        </td>
                    </tr>
                </table>

                <div class="gantt-left-block" style="width:{{ganttCtrl.infoBlockWidth.getValue()}}%">
                </div>

                <div class="gantt-right-block"
                     style="
                         width:{{100 - ganttCtrl.infoBlockWidth.getValue()}}%;
                         overflow: {{ganttCtrl.isZoomed() ? 'auto':'hidden'}}
                     ">

                    <div class="">
                    </div>
                </div>

                <div class="clearfix"></div>
            </div>

        </div>
    </div>

    <div class="dialogs">
        <ng-include src="'gantt/dialogs/timeline-options.html'"></ng-include>
        <ng-include src="'gantt/dialogs/task-editor.html'"></ng-include>
        <ng-include src="'gantt/dialogs/gantt-baselines-menu.html'"></ng-include>
        <ng-include src="'gantt/dialogs/processing-lock.html'"></ng-include>
    </div>

    <style>
        .todo {
            font-weight: bold;
            font-size: 15px;
            margin-top: 20px;
        }

        .todo.todo-done li {
            color: green;
        }

        .todo.todo-canceled li {
            color: grey;
            text-decoration: line-through;
        }
    </style>

    <br />
    <br />

    <div style="margin:20px; display:none">
        <h2>TODOs:</h2>
        <ul class="todo todo-current">
            <li> 2 views for app and app-dev</li>
        </ul>
        <ul class="todo todo-done">
            <li> $scope.task.isParent = $scope.task.parent_id == 0; - is not correct!</li>
            <li> task context menu [mouse right click]</li>
            <li> ng-if="dateInterval" not working in timeline directive</li>
            <li> extract timeline into directive!</li>
            <li> list.overallDateInterval resolve!</li>
            <li> multiple stripe types</li>
        </ul>
        <ul class="todo todo-canceled">
            <li> millestone (ng-if/ng-show) make more elegant</li>
            <li> use $router resolve to load dependencies for gantt data(and settings)?</li>
            <li> user service in common http service?</li>
            <li> wrapper for httpMock, not for common.http.service</li>
        </ul>
    </div>

