<!--TASK EDITOR-->
<div ng-controller="TaskEditorController as taskEditorCtrl"
     dialog-window="task-editor"
     class="col-md-offset-3 col-md-5 dialog-window-right">

    <form ng-submit="taskEditorCtrl.submit()" name="taskForm">
        <div class="form-group" ng-class="{'has-error': taskForm.name.$invalid}">
            <label for="name" class="control-label">Name</label>
            <input ng-model="taskEditorCtrl.task.name"
                   class="form-control"
                   name="name"
                   required
                   type="text"
                   id="name"
                   placeholder="Task Name">
        </div>

        <div class="form-group" ng-class="{'has-error':taskForm.$error.datesOrder}">
            <div class="row">
                <div class="col-md-6">
                    <label class="control-label" for="start">Start date</label>
                    <input ng-model="taskEditorCtrl.task._start"
                           class="form-control"
                           type="date"
                           required
                           id="start">
                </div>
                <div class="col-md-6">
                    <label class="control-label" for="end">End date</label>
                    <input ng-model="taskEditorCtrl.task._end"
                           class="form-control"
                           type="date"
                           required
                           id="end">
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12" ng-show="taskForm.$error.datesOrder">
                <div class="alert alert-warning" role="alert">
                    <strong>Error!</strong> Invalid dates order. Do you want to swap dates?
                    <button class="btn btn-warning btn-xs pull-right"
                            ng-click="taskEditorCtrl.swapDates()"
                            type="button">Swap dates
                    </button>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>

        <div class="form-group" ng-class="{'has-error': taskForm.percentComplete.$invalid}">
            <div class="row">
                <div class="col-md-3">
                    <label for="percentage-complete" class="control-label">% complete</label>
                    <input ng-model="taskEditorCtrl.task.percentComplete"
                           required
                           name="percentComplete"
                           type="number"
                           max="100"
                           min="0"
                           class="form-control"
                           id="percentage-complete">
                </div>
                <div class="col-md-9">
                    <label for="is-milestone" class="control-label">
                        <input type="checkbox"
                               name="isMilestone"
                               id="is-milestone" ng-model="taskEditorCtrl.task.isMilestone"
                               ng-change="taskEditorCtrl.setAsMilestone()">
                        Milestone
                    </label>

                    <input type="range"
                           name="percentComplete"
                           min="0"
                           max="100"
                           step="1"
                           string-to-number
                           ng-hide="taskEditorCtrl.task.isMilestone"
                           ng-model="taskEditorCtrl.task.percentComplete">

                    <label for="is-milestone"
                           ng-show="taskEditorCtrl.task.isMilestone"
                           class="control-label">

                        <input type="checkbox"
                               name="milestone-status"
                               ng-click="taskEditorCtrl.toggleAsMilestone()">
                        Passed
                    </label>


                </div>
            </div>
        </div>

        <!--<div class="form-group">-->
            <!--<div class="row">-->
                <!--<div class="col-md-12">-->
                    <!---->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->

        <div class="text-right">
            <button type="submit" class="btn btn-success">
                {{ !taskEditorCtrl.editMode ? 'Add Task' : 'Save Task'}}
            </button>
            <button type="button" dialog-trigger="task-editor" class="btn btn-default">Cancel</button>
        </div>
    </form>
</div>