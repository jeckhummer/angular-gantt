<!--TASK INFO-->
<div ng-repeat="task in ganttCtrl.tasks"
     ng-controller="TaskController as taskCtrl">

    <div dialog-trigger="task-editor" dialog-argument="task.id" style="cursor: pointer">

        <div ng-controller="TaskClickController as clickCtrl"
             ng-click="clickCtrl.onClick($event, task.id)"
             ng-right-click="clickCtrl.onRightClick($event,task.id)"
             ng-class="{'task-selected': clickCtrl.isSelected(task.id)}"
             class="task_wrapper"
             ng-class-odd="'task_wrapper_odd'"
             data-toggle="context"
             data-target="#context-menu">

            <div class="task_name text-left">
                {{taskCtrl.name}}
            </div>
            <div>
                <date-interval start="taskCtrl.start"
                               end="taskCtrl.end"
                               class="date_label"
                               is-milestone="taskCtrl.isMilestone"></date-interval>

                <span ng-show="taskCtrl.hasBaseline">
                     | <date-interval start="taskCtrl.baseline.dateInterval.start"
                                   end="taskCtrl.baseline.dateInterval.end"
                                   class="date_label baseline_date_label"
                                   is-milestone="taskCtrl.isMilestone"></date-interval>
                </span>
                <span class="label pull-right"
                      ng-class="{
                        'label-success': taskCtrl.isCompleted,
                        'label-info': taskCtrl.percentComplete >= 66 && taskCtrl.percentComplete < 100,
                        'label-warning': taskCtrl.percentComplete >= 33 && taskCtrl.percentComplete < 66,
                        'label-danger': taskCtrl.percentComplete < 33
                      }"
                      style="margin-top:3px; width:35px;">
                    <span ng-hide="taskCtrl.isMilestone">{{taskCtrl.percentComplete}}%</span>
                    <span ng-show="taskCtrl.isMilestone">
                        <span class="glyphicon glyphicon-{{taskCtrl.isCompleted ? 'ok' : 'remove'}}" aria-hidden="true"></span>
                    </span>
                </span>
            </div>

            <div class="clearfix"></div>
        </div>
    </div>
</div>

<div ng-include="'gantt/tasks/task-context-menu.html'"></div>